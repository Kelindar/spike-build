<?xml version="1.0" encoding="UTF-8"?>
<Protocol Name="MyChatProtocol" xmlns="http://www.spike-engine.com/2011/spml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Operations>

    <!-- Simple join chat operation that puts the client to the chat room -->
    <Operation Name="JoinMyChat"
               SuppressSecurity="true" />

    <!-- Simple send message operation that broadcast the message to the chat room -->
    <Operation Name="SendMyChatMessage"
               SuppressSecurity="true"
               Compression="Incoming">
      <Incoming>
        <Member Name="Message" Type="String" />
      </Incoming>
    </Operation>

    <!-- A push operation (server to client) that sends the messages to the clients -->
    <Operation Name="MyChatMessages"
               SuppressSecurity="true"
               Compression="Outgoing"
               Direction="Push">
      <Outgoing>
        <Member Name="Avatar" Type="ListOfByte" />
        <Member Name="Message" Type="String" />
      </Outgoing>
    </Operation>
    
    <Operation Name="TestMessage"
               Compression="Both">
      <Outgoing>
        <Member Name="Id" Type="UInt32" />
        <Member Name="MyCustom" Type="ComplexType" Class="MyCustomClass">
          <Member Name="Number" Type="Int32" />
          <Member Name="Message" Type="String" />
          <Member Name="MyCustom3" Type="ComplexType" Class="MyCustomClass3">
            <Member Name="Number3" Type="Int32" />
          </Member> 
        </Member>
      </Outgoing>
      <Incoming>
        <Member Name="Id" Type="UInt32" />
        <Member Name="MyCustom" Type="ListOfComplexType" Class="MyCustomClass2">
          <Member Name="Number2" Type="Int32" />
          <Member Name="Floflo" Type="Single" />
          <Member Name="Message2" Type="String" />
        </Member>
      </Incoming>
    </Operation>  


  </Operations>
</Protocol>